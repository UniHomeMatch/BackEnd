generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model User {
  id        Int        @id @default(autoincrement())
  name      String
  cpf       String     @unique
  birthdate DateTime
  generoId  Int
  email     String     @unique
  password  String
  genero    Genero     @relation(fields: [generoId], references: [id_genero])
  imobi     Imobi[]
  mensagem  Mensagem[]
  @@map("users")
}


model Imobi {
  id          Int       @id @default(autoincrement())
  userId      Int
  thumb       String?
  images      Imagem[]
  predio      String?
  description String?   @db.VarChar(255)
  price       String?
  cep         String?
  logradouro  String?
  bairro      String?
  numero      String?
  complemento String?
  cidade      String?
  uf          String?
  area        String?
  bedrooms    String?
  bathrooms   String?
  name        String?
  phone       String?
  email       String?
  generoId    Int
  genero      Genero    @relation(fields: [generoId], references: [id_genero])

  slug       String?  @unique
  created_at DateTime @default(now())
  author     User     @relation(fields: [userId], references: [id])

  @@map("imoveis")
}

model Imagem {
  id          Int    @id @default(autoincrement())
  filename    String
  imobiId     Int
  imobi       Imobi  @relation(fields: [imobiId], references: [id])
}

model Genero {
  id_genero Int     @id @default(autoincrement())
  genero    String
  users     User[]
  Imobi     Imobi[]

  @@map("genero")
}

model Mensagem {
  id              Int    @id @default(autoincrement())
  client_name     String
  client_email    String
  client_message  String
  client_telefone String
  userId          Int
  author          User   @relation(fields: [userId], references: [id])

  @@map("mensagem")
}
